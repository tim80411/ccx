# CCX é–‹ç™¼ä»»å‹™æ¸…å–®

## Phase 1: å°ˆæ¡ˆåˆå§‹åŒ–

- [ ] 1.1 åŸ·è¡Œ `bun init` åˆå§‹åŒ–å°ˆæ¡ˆ
- [ ] 1.2 å®‰è£ä¾è³´ï¼š`bun add commander`
- [ ] 1.3 å»ºç«‹ç›®éŒ„çµæ§‹ï¼š`src/commands/`, `src/utils/`
- [ ] 1.4 å»ºç«‹ TypeScript è¨­å®š `tsconfig.json`
- [ ] 1.5 è¨­å®š `package.json` çš„ `bin` æ¬„ä½æŒ‡å‘å…¥å£

## Phase 2: æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œï¼ˆTDDï¼‰

### 2.1 è·¯å¾‘å·¥å…· (`src/utils/paths.ts`)

- [ ] 2.1.1 ğŸ”´ æ’°å¯« `paths.test.ts` æ¸¬è©¦æ¡ˆä¾‹
  - `getClaudeSettingsPath()` æ‡‰å›å‚³ `~/.claude/settings.json`
  - `getCcxSettingsDir()` æ‡‰å›å‚³ `~/.config/ccx/settings/`
  - `getSettingPath(name)` æ‡‰å›å‚³æŒ‡å®š setting çš„å®Œæ•´è·¯å¾‘
  - `getPreviousPath()` æ‡‰å›å‚³ `previous.json` è·¯å¾‘
- [ ] 2.1.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.1.3 ğŸŸ¢ å¯¦ä½œ `paths.ts` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

### 2.2 æª”æ¡ˆæ“ä½œå·¥å…· (`src/utils/fs.ts`)

- [ ] 2.2.1 ğŸ”´ æ’°å¯« `fs.test.ts` æ¸¬è©¦æ¡ˆä¾‹
  - `ensureDir(path)` æ‡‰ç¢ºä¿ç›®éŒ„å­˜åœ¨
  - `copyFile(src, dest)` æ‡‰æ­£ç¢ºè¤‡è£½æª”æ¡ˆ
  - `fileExists(path)` æ‡‰æ­£ç¢ºæª¢æŸ¥æª”æ¡ˆå­˜åœ¨
  - `listJsonFiles(dir)` æ‡‰åˆ—å‡º .json æª”æ¡ˆï¼ˆæ’é™¤ previous.jsonï¼‰
- [ ] 2.2.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.2.3 ğŸŸ¢ å¯¦ä½œ `fs.ts` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

### 2.3 Setting å‘½ä»¤é‚è¼¯ (`src/commands/setting.ts`)

#### 2.3.1 `create(name)` åŠŸèƒ½

- [ ] 2.3.1.1 ğŸ”´ æ’°å¯« create æ¸¬è©¦æ¡ˆä¾‹
  - åç¨±ç‚º `previous` æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - setting å·²å­˜åœ¨æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - ä¾†æºæª”æ¡ˆä¸å­˜åœ¨æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - æ­£å¸¸æƒ…æ³æ‡‰è¤‡è£½æª”æ¡ˆä¸¦è¼¸å‡ºæˆåŠŸè¨Šæ¯
- [ ] 2.3.1.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.3.1.3 ğŸŸ¢ å¯¦ä½œ `create(name)` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

#### 2.3.2 `list()` åŠŸèƒ½

- [ ] 2.3.2.1 ğŸ”´ æ’°å¯« list æ¸¬è©¦æ¡ˆä¾‹
  - æœ‰è³‡æ–™æ™‚æ‡‰æ ¼å¼åŒ–è¼¸å‡º
  - ç©ºåˆ—è¡¨æ™‚æ‡‰é¡¯ç¤ºæç¤ºè¨Šæ¯
- [ ] 2.3.2.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.3.2.3 ğŸŸ¢ å¯¦ä½œ `list()` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

#### 2.3.3 `use(name)` åŠŸèƒ½

- [ ] 2.3.3.1 ğŸ”´ æ’°å¯« use æ¸¬è©¦æ¡ˆä¾‹
  - setting ä¸å­˜åœ¨æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - æ­£å¸¸æƒ…æ³æ‡‰å‚™ä»½åˆ° previous.json
  - æ­£å¸¸æƒ…æ³æ‡‰è¤‡è£½æŒ‡å®š setting åˆ° claude settings
- [ ] 2.3.3.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.3.3.3 ğŸŸ¢ å¯¦ä½œ `use(name)` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

#### 2.3.4 `update(name)` åŠŸèƒ½

- [ ] 2.3.4.1 ğŸ”´ æ’°å¯« update æ¸¬è©¦æ¡ˆä¾‹
  - setting ä¸å­˜åœ¨æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - ä¾†æºæª”æ¡ˆä¸å­˜åœ¨æ™‚æ‡‰æ‹‹å‡ºéŒ¯èª¤
  - æ­£å¸¸æƒ…æ³æ‡‰è¦†è“‹æŒ‡å®š setting
- [ ] 2.3.4.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 2.3.4.3 ğŸŸ¢ å¯¦ä½œ `update(name)` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰

## Phase 3: CLI æ•´åˆï¼ˆTDDï¼‰

- [ ] 3.1 ğŸ”´ æ’°å¯« CLI æ•´åˆæ¸¬è©¦ `index.test.ts`
  - æ¸¬è©¦ `setting create <name>` å‘½ä»¤
  - æ¸¬è©¦ `setting list` å‘½ä»¤
  - æ¸¬è©¦ `setting use <name>` å‘½ä»¤
  - æ¸¬è©¦ `setting update <name>` å‘½ä»¤
  - æ¸¬è©¦éŒ¯èª¤è™•ç†ï¼ˆstderr + exit 1ï¼‰
- [ ] 3.2 ç¢ºèªæ¸¬è©¦å¤±æ•—ï¼ˆç´…ç‡ˆï¼‰
- [ ] 3.3 ğŸŸ¢ å»ºç«‹ CLI å…¥å£ `src/index.ts` è®“æ¸¬è©¦é€šéï¼ˆç¶ ç‡ˆï¼‰
  - è¨­å®š Commander ç¨‹å¼åç¨±èˆ‡ç‰ˆæœ¬
  - å»ºç«‹ `setting` å­å‘½ä»¤ç¾¤çµ„
  - è¨»å†Šæ‰€æœ‰å­å‘½ä»¤
  - å¯¦ä½œå…¨åŸŸéŒ¯èª¤è™•ç†

## Phase 4: ç™¼å¸ƒæº–å‚™

- [ ] 4.1 æ’°å¯« README.mdï¼ˆå®‰è£ã€ä½¿ç”¨æ–¹å¼ï¼‰
- [ ] 4.2 åŸ·è¡Œ `bun link` æ¸¬è©¦å…¨åŸŸå®‰è£
- [ ] 4.3 é©—è­‰ `ccx` å‘½ä»¤å¯æ­£å¸¸åŸ·è¡Œ
